language: node_js
node_js:
- 8.9.4
before_deploy:
- echo "Installing cf cli"
- test x$TRAVIS_OS_NAME = "xlinux" && rel="linux64-binary" || rel="macosx64"; wget
  "https://cli.run.pivotal.io/stable?release=${rel}&source=github" -qO cf.tgz && tar
  -zxvf cf.tgz && rm cf.tgz
- export PATH="$PATH:."
- cf --version
- echo "Installing cf blue-green deploy plugin"
- cf add-plugin-repo CF-Community https://plugins.cloudfoundry.org
- cf install-plugin blue-green-deploy -r CF-Community -f
- export DEPLOY_TIMESTAMP=`date +'%Y%m%d-%H%M%S'`
deploy:
- provider: script
  skip_cleanup: true
  script: "./scripts/cf-blue-green-deploy.sh blue-green-cf-travis manifest.yml prod"
  on:
    branch: master
after_script:
- echo "Run your full suite of automated regression tests here"
env:
  global:
  - secure: ecPGm+FlMF8ajK8YwAzZqdAOGMRPA4oN7ee9QJrHHHRW5zbqo+VyjztcdN4Qa4wxxedN6F7VSSjwsxtVxTsrMARzqJCz9qsbvbP5W+vg0Fk5Aod6HPqI0q6wWd03QBHKL/rKi2XgUZvPuAsNiTlcltXDuvQI78elMa5Ng0ik54e2KcL2ax3RsffyC3DovQ6PnyTncdwVq4tSCtYheLNKf1pE1hC+W62ppfpZjk6/Mbsh/OryCoGZmKCWC4hZ7UgHJE+0bzI0Uav/sThFLf6qmMQnYT1WGvy/Gpuogrn90Yzhr3J5uGt52jd1+k+mxCXI5dhluqryp1twfZj7lp/uaz37qsd4iKqTFSWMNAFYEV6p7h6eKG+ooTxap+cJqWXz0/hek0VgEBdU8AZ8UxziYLLDOtlenyuowncyWZU6dOxaEa46lxjwYfZTG2omE+J1mwQVotuhXY/CVTepUNw81Dvq22LdHvJTDNtssHoylUNLKm0J3qNkQ+VIV0XtpUXtUw5BdtfYcsC6yeyLtdMdUCfC42bqNF4/YXuK7zn/6R1kR22MgAn2hso7u+juFK327HZ14uL4r0CFJ79pfphWd5bWEQsB/m3nQ+7v7/1kJ+it4DVv9kX2xmvL2xGtBocvm3UewJn/KQf3+nd+EAZI7QUkfIlkrwQLHIV7bJESc94=
  - secure: GdomciD5Bp+02Rv3Z8CNdPyUnexFTkJhTqtofUQRXIC1vuRP5Iidogcdw1eNYTp8FqSJ8qWA+tqLf947AoGPUdtHr6izve1VBlR7fwL/9JI9VsOcEw1mG/+vdfu3qrA82WA86/R88IsdYc9ZqBTVHy9H7Hkk2LQEMKVbav+RTaYXAABrTesd0yHh/b5amPo9q7yIAIG+Sbf+vBtLOXiCULi1I3dNripohj5ZaqahuIOKequCp6RQ8nbbok0VpM9DdkFJmB/d9+IQm7lrP/T7sio9UI+5bcbtniPgRKSPpbXqXIbLYhZ9XTAm4PldW+xisxePtJq02Wp967x86L2++5PGE8zu674rAS7pC9xkKb/QbGOwvLIos0ZZiJvXn97ZZ0lVJBu3ZS4bY9FqzIJqg85nBtX/1dnY/i1NbcY8HP1zmYzav4Xvfhq2grZqo9/CyN8MfEirGX8e9IV5zZ6960IdPOZT0Y0eg1U+1Izfr/t3nkYukSWxU80KsYxL61anb8XqFYXmfQR7pjwmwsjYybgQXEG3rSZ7SJ73BPGEgF/cSbUTP7SlhgisB71hmqRu/UxLfbyFClaGfmzKz9oNhiapIks8VWdysp16WSpiS8A7Jzv0eD7Wz71mydLtrj/eScDdxD+dp0Wx88AkeAPaauktfGEeR+EBpC849G2YgLY=
  - secure: BKxjGTUd0azjQam9jvp4YzSgCw5XfyJ8xnehUiW1E4qhXPSSGQ42+18RV27tr+0HhqhAHcepyQT/WwO+7Vx5vFYJB+e6K2Srzi+Lq0Vuf5i7e/+xakLEN9NeGgZ9IdrqBYkEaMj+jgbtUpM9V2dYdeytvcjerDzd79qunEcPsziNwuyeF6UmmoqcPFhm9Z936R1yRLF06/+IybmXLv0cQbfmSemtno3gXrwOX4326inAlb/WKQidVvTKkXqaQ/aLzFSEJfhOG57hlkm4UTdNCOKlmbLpst1HXtp7l0Lv8x1Si1ksGAW5iiIBOjep90gzNk3PL0XJmv5sToJbJP2kAxEdTcZTHRehScSrLA1N7NUBYp9plvXM0+dfy5t7aZCvlBdbjlKcJag1EIoyhBSVsW7KpEOTR/BWw4bUv6mnrL8L9PYfw010oMQ/PgPb7/qZ7uGdE/zyGZDMdv6PHZZ5rtgJrUjT2pdSNe5LpmrhiRLzTIVTUEXEVNtZOPykoaZ44wQbkkdqOQDYXeSGoffZbLtnsSHrFwnjhSLZGwveE+kA8d7TASVvEmmhbRhLtiX8ywYA4K/k5fZ14MHk7UOmFiebgUmVxGdKLhHyx/NYs4KzufstbuLf7dbWJqGePYPzTFuNWzmiCVC7bOdjMlM5Jy6v8m7OxYNM8Y6Haus/zTU=
  - secure: AEKBexTGa+FRW1cnjRUwd+zXuVjoqU2gsy8ZANSkEHbTPIHwPWfKi7wz2Nx+EiOFoZTJKTrEmV/6dc+j+R2UA0mpf/VTvEKPCys973IoCPUo7coYc9SVygb2tpMDC1X67iN6Kfd9FRhJ5p/XXQpKo3kZvTaRKeh5N9bw+xr9Sv4HZFXbyOPBKjeZHB4J9FrKw17DlK1SEka0QautqVztlUjDsX/4jESoCleRqZqqycfa+CdoxTqvCV4ffyEDjDSXcdAWCsaKZPjggFD8xHPZ/VCtEzPS0JcXAEZCZy3m2/T+ipamRjXCiRPhteY3x6Ft2tFqTQFtFLAg4EZ/dtE2+tWp8aCaw1EOXcgAwcH+BaPBPK2K052Ki1X5gIxQ9Dh6Y+7Mpb2Hi3v78okTUljicFGoQswlkEbKTAoqeEY/AEcyCE9+BddIBM14DJxbYlSfE/Y+07eJIs2bZB4BkaztD1ImNyh31uBtGqkGUs9KheOTLX0ToxdkOAvQOqZo07NFxxPa5MrtLYNhc5htLBuzE9iUfMyCu/GYfsdT5QKZ6CJtQJ4Mc0vQsKIsOmK4U0Ro2YOPvexTN2eZ2O+irHRARCtmlf2qQcX7MPyaLG4N0TE5u2y0sc1AWwjmeFt2UJvU7E9jdRpbvEORh14JCoKbCLHirIO1FIetnOnGHTgw1qw=
